#!/bin/sh

set -e

echo "â–¶ï¸ Running pre-commit hook..."

echo "ğŸ§ª Running tests and code coverage..."
cargo llvm-cov nextest --workspace --fail-under-functions 100 --fail-under-lines 100 --fail-under-regions 100

echo "â˜£ï¸ Checking for security vulnerabilities..."
RUST_LOG=info cargo audit --quiet

echo "âœ¨ Formatting with fmt..."
cargo fmt --all -- --check

echo "ğŸ“ Linting with clippy..."
cargo clippy --all-targets --all-features

echo "âœ… Pre-commit checks passed successfully!"
